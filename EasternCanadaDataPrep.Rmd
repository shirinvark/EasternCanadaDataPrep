---
title: "EasternCanadaDataPrep Manual"
subtitle: "Eastern Canada spatial data preparation"
date: "Last updated: 2025-12-15"
output:
  bookdown::html_document2:
    toc: true
    toc_float: true
    theme: sandstone
    number_sections: false
---
EasternCanadaDataPrep Module
Executive summary
EasternCanadaDataPrep is a SpaDES module that constructs a raster-based landbase accounting framework
for forest modelling applications in Eastern Canada.

The module defines where harvesting is spatially permissible by applying legal and physical constraints
to a wall-to-wall planning raster.
It does not perform forest classification, yield modelling, or harvest allocation.

This module is intentionally limited to spatial accounting only and produces inputs required by
downstream modules such as LandR, AAC calculation, and harvest scheduling.

What this module does
Defines a consistent Eastern Canada study area

Loads and harmonizes Forest Management Units (FMUs)

Loads and filters protected and conserved areas (CPCAD)

Prepares hydrology inputs for riparian influence analysis

Constructs a coarse-resolution planning raster (default: 250 m)

Produces a cell-based landbase accounting table with effective harvestable area

What this module does not do
This module intentionally avoids ecological or management interpretation.

It does not:

Download or process land-cover data

Classify forest vs. non-forest

Estimate biomass, age, or productivity

Apply silvicultural or management rules

Allocate or schedule harvest

All ecological interpretation and management decisions are deferred to downstream modules.

Module workflow
java
Copy code
Study Area
   ↓
Forest Management Units (FMU)
   ↓
Protected Areas (CPCAD)
   ↓
Hydrology inputs (HydroRIVERS)
   ↓
Planning Raster (250 m)
   ↓
Landbase Accounting Table
   ↓
Downstream modules (LandR, AAC, Harvest)
Design principles
This module follows four core design principles:

1. Raster-first
All landbase accounting is performed on a wall-to-wall raster grid to ensure
scalability and computational efficiency.

2. Separation of concerns
This module handles spatial constraints only.
Ecological meaning and management decisions are handled downstream.

3. Legal, not ecological, harvestability
“Harvestable” means not legally excluded, not “forested”, “merchantable”, or “operable”.

4. Transparency and reproducibility
All area calculations are explicit, auditable, and reproducible.

External dependencies
Land cover (upstream dependency)
Land cover is treated as a strict upstream dependency.

This module does not download, preprocess, reclassify, or interpret land-cover data.
If required, land cover must be supplied by an upstream module.

Expected characteristics (if provided):

Object name: sim$LandCover

Type: terra::SpatRaster

Projection: ESRI:102001

Resolution: finer than the planning resolution

Land cover is not required for constructing the legal harvestable mask in this module.

Study area definition
If no study area is supplied by the user, the module constructs a default
Eastern Canada study area including:

Ontario

Québec

New Brunswick

Nova Scotia

Prince Edward Island

Newfoundland and Labrador

All spatial layers are harmonized to:

Canada Albers Equal Area Conic (ESRI:102001)

Forest Management Units (FMUs)
Forest Management Units are loaded as vector polygons and harmonized to the
study area extent and projection.

FMUs define the administrative units for landbase accounting.
They are rasterized to the planning grid using a center-of-pixel rule to ensure
consistent assignment of cells to management units.

Protected and conserved areas (CPCAD)
Protected and conserved areas are derived from the Canadian Protected and Conserved Areas Database (CPCAD).

Processing includes:

Cropping and masking to the study area

Reprojection to ESRI:102001

Policy-level filtering (no ecological interpretation)

These areas represent legal exclusions from harvesting and are applied
as a binary mask.

Hydrology — riparian influence
Hydrology is represented as a fractional raster of riparian influence, not as
explicit vector hydrological features.

Rationale
National-scale hydrology vector datasets are too large and complex for repeated
use in raster-based modelling workflows.

Instead, hydrology is represented by its spatial influence on land area.

Data source
Riparian influence is derived from HydroRIVERS (HydroSHEDS).

Processing logic
Load HydroRIVERS flowlines and crop to the study area

Apply a uniform buffer (riparianBuffer_m)

Rasterize buffered features to a coarse grid (hydroRaster_m)

Compute fractional overlap per cell

Output structure
r
Copy code
sim$Hydrology <- list(
  source = "HydroRIVERS_v10_na",
  buffer_m = <buffer distance>,
  raster_m = <resolution>,
  riparianFraction = <SpatRaster [0–1]>
)
Each cell value represents the fraction of the cell influenced by riparian buffers.

Planning raster
The planning raster is a coarse-resolution grid (default: 250 m) that defines
the spatial units used for landbase accounting.

It is constructed by:

Creating a wall-to-wall raster template

Assigning FMU identifiers

Applying protected-area exclusions

No land-cover or ecological classification is applied at this stage.

Landbase accounting table
A cell-based accounting table is constructed from the planning raster.

Each row represents one planning cell and records:

FMU identifier

Cell area (m²)

Riparian fraction (0–1)

Effective harvestable area after constraints

This table enables transparent and reproducible area calculations
without repeated raster processing.

Harvestable Land Base (HLB) — legacy / optional
Vector-based Harvestable Land Base (HLB) construction is retained for
development and validation purposes only.

The primary landbase representation in this module is raster-based.

Module outputs
Primary outputs include:

Planning raster

Harvestable mask raster

Riparian fraction raster

Landbase accounting table

Structured landbase object for downstream use

Relationship to other modules
This module must be run before:

LandR forest dynamics modules

AAC calculation modules

Harvest scheduling and allocation modules

It provides spatial constraints only and makes no assumptions about
forest condition or management objectives.

Summary
EasternCanadaDataPrep defines where harvest could legally occur,
not where it should occur.

This distinction ensures a clean, modular, and scalable modelling architecture.

